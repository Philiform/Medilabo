<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Medilabo</title>

	<link rel="stylesheet" type="text/css" href="http://localhost:8080/css/bootstrap.min.css" />
	<link rel="stylesheet"
	href="/webjars/bootstrap-icons/1.10.3/font/bootstrap-icons.css">

</head>

<body>


	<div class="container">

		<h1 class="text-center m-5">M&eacute;dilabo Solutions</h1>

		<h2 class="text-center mb-3">Infos Patient</h2>
	
<!--	ROWS: disease assessment -->
		<div class="row bg-light">
			<div class="row px-5 py-4 justify-content-center align-items-center">
				<div class="col-5 mb-3">
					<label>Disease:</label>
					<label th:text="${disease}"></label>
				</div>
				<div class="col-5 mb-3">
					<label>Assessment:</label>
					<label th:text="${assessment}"></label>
				</div>
			</div>
		</div>

<!--	FORM: UPDATE informations patient -->
		<div class="row bg-light mt-3">
			<form method="post" th:action="@{/patient/update}" th:object="${patient}">
				<div class="row px-5 py-4 justify-content-center align-items-center">
					<div class="col-5 mb-3">
						<input type="hidden" class="form-control" id="id" th:field="*{id}">
						<label>Last name</label>
						<input type="text" class="form-control" id="lastName" th:field="*{lastName}" required>
					</div>
					<div class="col-5 mb-3">
						<label>First name</label>
						<input type="text" class="form-control" id="firstName" th:field="*{firstName}" required>
					</div>
					<div class="col-5 mb-3">
						<label>Birthday</label>
						<input type="text" class="form-control" id="birthday" th:field="*{birthday}" required>
					</div>
					<div class="col-5 mb-3">
						<label>Genre</label>
						<div class="col-12">
							<input type="radio" id="choise1" th:field="*{genre}" value="F">
							<label for="choise1">Woman</label>
						</div>

						<div class="col-12">
							<input type="radio" id="choise2" th:field="*{genre}" value="M">
							<label for="choise2">Man</label>
						</div>
					</div>
					<div class="col-5 mb-3">
						<label>Address</label>
						<input type="text" class="form-control" id="address" th:field="*{address}">
					</div>
					<div class="col-5 mb-3">
						<label>Phone number</label>
						<input type="text" class="form-control" id="phoneNumber" th:field="*{phoneNumber}">
					</div>
					<div class="col-3 justify-content-center">
						<button type="submit" class="btn btn-primary mt-4 px-2 textBold">Update</button>
					</div>
				</div>
			</form>
		</div>

<!--	BUTTON: RETURN list patient -->
		<div class="row mt-4 justify-content-center">
			<div class="col-3">
			<a class="btn btn-success" th:href="@{/patient/list}">
				Patient List
			</a>
			</div>
		</div>

<!--	TABLE: SHOW list notes patient -->
		<div class="row mt-4 px-0 border border-dark">
			<table class="table table-striped table-borderless">
				<thead>
					<tr class="text-center text-light" bgcolor="198754">
						<th>Date</th>
						<th>Notes</th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="n:${listNotesDTO.notes}" style="vertical-align: middle;">
						<td th:text="${n.date}"></td>
						<td th:text="${n.note}"></td>
						<td class="col-1" th:align="center">
							<a class="btn btn-primary"
								th:href="@{'/patient/' + ${listNotesDTO.patientId} + '/note/' + ${n.id} + '/update'}">
								<i class="bi bi-pencil"></i>
							</a>
						</td>
						<td class="col-1" th:align="center">
							<a onclick="return confirm('Are you sure you want to delete this note ?')"
								class="btn btn-danger"
								th:href="@{'/patient/' + ${listNotesDTO.patientId} + '/note/' + ${n.id} + '/delete'}">
								<i class="bi bi-trash"></i>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>

<!--	FORM: ADD note for a patient -->
		<div class="row bg-light mt-4">
			<form method="post" th:action="@{/patient/note/save}" th:object="${noteDTO}">
				<div class="row">
					<div class="col-12">
						<label>Note</label>
					</div>
					<div class="col-12">
						<input type="hidden" class="form-control" id="patientId" th:field="*{patientId}">
						<input type="hidden" class="form-control" id="noteBean.id" th:field="*{noteBean.id}">
						<input type="hidden" class="form-control" id="noteBean.date" th:field="*{noteBean.date}">
						<input type="text" class="form-control" id="note" th:field="*{noteBean.note}" required>
					</div>
				</div>
				<div class="row justify-content-center">
					<div class="col-3">
						<button type="submit" class="btn btn-primary my-4 px-2 textBold"><i class="bi bi-save"></i></button>
					</div>
				</div>
			</form>
		</div>

<!--	BUTTON: RETURN list patient -->
		<div class="row my-4 justify-content-center">
			<div class="col-3">
			<a class="btn btn-success" th:href="@{/patient/list}">
				Patient List
			</a>
			</div>
		</div>

	</div>
</body>

</html>